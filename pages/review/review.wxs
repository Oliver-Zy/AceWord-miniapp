module.exports = {
  isChecked: function (wordCardID, checkedWordCardIDList) {
    if (checkedWordCardIDList == undefined) return false
    return checkedWordCardIDList.indexOf(wordCardID+"") == -1 ? false : true  
  },
  
  // 计算复习日期组中的实际单词总数
  calculateReviewWordCount: function (reviewDateItem) {
    if (!reviewDateItem) return 0
    
    // 如果已展开，使用实际的wordCardList计算
    if (reviewDateItem.isExpanded && reviewDateItem.wordCardList) {
      var totalCount = 0
      for (var i = 0; i < reviewDateItem.wordCardList.length; i++) {
        var card = reviewDateItem.wordCardList[i]
        if (card.wordList && card.wordList.length > 0) {
          totalCount += card.wordList.length
        } else if (card.wordInfoList && card.wordInfoList.length > 0) {
          totalCount += card.wordInfoList.length
        }
      }
      return totalCount
    }
    
    // 如果未展开，根据已有数据估算
    if (reviewDateItem.wordCardList && reviewDateItem.wordCardList.length > 0) {
      var firstCard = reviewDateItem.wordCardList[0]
      var wordsPerCard = 0
      
      if (firstCard.wordList && firstCard.wordList.length > 0) {
        wordsPerCard = firstCard.wordList.length
      } else if (firstCard.wordInfoList && firstCard.wordInfoList.length > 0) {
        wordsPerCard = firstCard.wordInfoList.length
      }
      
      // 使用第一张卡片的单词数 × 总卡片数来估算
      if (wordsPerCard > 0 && reviewDateItem.totalCardNum) {
        return wordsPerCard * reviewDateItem.totalCardNum
      }
    }
    
    return 0
  },
  
  // 日期格式化函数 - 中文格式
  formatChineseDate: function (date) {
    if (!date) return ''
    var month = parseInt(date.slice(4, 6))
    var day = parseInt(date.slice(6, 8))
    return month + '月' + day + '日'
  }
}